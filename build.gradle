

//http://gradle.org/docs/current/userguide/multi_project_builds.html#sub:real_life_examples

subprojects {
	apply plugin: 'java'
    apply plugin: 'eclipse'
	apply from: '../maven.gradle'
	apply plugin: 'jacoco'
    
    
    // compiler options
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8

	// maven metadata
	group = "net.javapla.jawn"
	version = "0.9.2-SNAPSHOT"
	
	repositories {
	    mavenCentral()
	}
	
	// test configurations
	tasks.withType(JavaCompile) {
    	options.encoding = 'UTF-8'
	}
	
	test {
		testLogging {
			// Make sure output from
			// standard out or error is shown
			// in Gradle output.
			showStandardStreams = true
		}
		ignoreFailures true
	}

// implement https://github.com/kt3k/coveralls-gradle-plugin	
	jacoco {
	    toolVersion = "0.7.6.201602180812"
	}
	jacocoTestReport { // run: gradle test jacocoTestReport
		reports {
			xml.enabled = true // coveralls plugin depends on xml format report
			html.enabled = true
		}
	}
}

//https://docs.gradle.org/current/dsl/org.gradle.api.artifacts.ResolutionStrategy.html
configurations.all {
    resolutionStrategy {
        // fail eagerly on version conflict (includes transitive dependencies)
        // e.g. multiple different versions of the same dependency (group and name are equal)
        failOnVersionConflict()
    }
}